version: '3.7'

services:
    redis:
        image: bitnami/redis
        ports:
            - "6379:6379"    
        environment:
            - ALLOW_EMPTY_PASSWORD=yes
        volumes:
            - /home/bijay/redis:/bitnami/redis/data
        deploy:
            mode: replicated
            replicas: 1
            restart_policy:
                max_attempts: 5
            placement:
                constraints: [node.role == manager]
        networks:
            - docker_default 
            
networks:
    docker_default:
        external: true